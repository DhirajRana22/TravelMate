{% extends "dashboard/base.html" %} {% load static %} {% block title %}Delete
Testimonial - Dashboard{% endblock %} {% block dashboard_content %}
<div class="container mx-auto px-4 sm:px-8">
  <div class="py-8">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-2xl font-semibold leading-tight text-gray-800">
            <i class="fas fa-trash mr-2 text-red-500"></i>Delete Testimonial
          </h2>
          <p class="text-gray-600">
            Confirm testimonial deletion - this action cannot be undone
          </p>
        </div>
        <a
          href="{% url 'dashboard:testimonials_management' %}"
          class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"
        >
          <i class="fas fa-arrow-left mr-2"></i>Back to Testimonials
        </a>
      </div>

      <!-- Warning Alert -->
      <div class="bg-red-50 border-l-4 border-red-500 p-6 mb-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
          </div>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-red-800">
              Danger Zone - Permanent Action
            </h3>
            <p class="text-red-700 mt-1">
              Are you sure you want to delete this testimonial? This action
              cannot be undone and will remove the testimonial from your website
              immediately.
            </p>
          </div>
        </div>
      </div>

      <!-- Testimonial Preview Card -->
      <div class="bg-white rounded-lg shadow p-6 mb-6">
        <h3
          class="text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2"
        >
          <i class="fas fa-eye mr-2 text-blue-500"></i>Testimonial Preview
        </h3>

        <div class="bg-gray-50 p-6 rounded-lg border-l-4 border-red-500">
          <div class="flex items-start space-x-4 mb-4">
            <div class="flex-shrink-0">
              <img
                src="{% if testimonial.avatar %}{{ testimonial.avatar.url }}{% else %}{% static 'img/avatar-placeholder.svg' %}{% endif %}"
                alt="{{ testimonial.name }}"
                class="w-16 h-16 rounded-full object-cover border-2 border-gray-300"
              />
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between mb-2">
                <div>
                  <h4 class="text-lg font-semibold text-gray-800">
                    {{ testimonial.name }}
                  </h4>
                  {% if testimonial.designation %}
                  <p class="text-sm text-gray-600">
                    {{ testimonial.designation }}
                  </p>
                  {% endif %}
                </div>
                <span
                  class="px-3 py-1 rounded-full text-sm font-semibold {% if testimonial.is_active %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-800{% endif %}"
                >
                  {% if testimonial.is_active %}Active{% else %}Inactive{% endif
                  %}
                </span>
              </div>

              <div class="flex items-center mb-3">
                <div class="flex space-x-1 mr-2">
                  {% for star in testimonial.get_star_range %}
                  <i class="fas fa-star text-yellow-400"></i>
                  {% endfor %} {% for empty_star in
                  testimonial.get_empty_star_range %}
                  <i class="far fa-star text-gray-300"></i>
                  {% endfor %}
                </div>
                <span class="text-sm text-gray-600"
                  >({{ testimonial.rating }}/5)</span
                >
              </div>
            </div>
          </div>

          <blockquote class="text-gray-700 italic mb-4">
            "{{ testimonial.testimonial_text }}"
          </blockquote>

          <div class="flex justify-between items-center text-sm text-gray-500">
            <div class="flex items-center">
              <i class="fas fa-sort-numeric-up mr-1"></i>
              <span>Display Order: {{ testimonial.display_order }}</span>
            </div>
            <div class="flex items-center">
              <i class="fas fa-calendar mr-1"></i>
              <span>Created: {{ testimonial.created_at|date:"M d, Y" }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Impact Information -->
      <div class="bg-white rounded-lg shadow p-6 mb-6">
        <h3
          class="text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2"
        >
          <i class="fas fa-exclamation-circle mr-2 text-orange-500"></i>Deletion
          Impact
        </h3>

        <div class="space-y-3">
          <div class="flex items-start">
            <i class="fas fa-globe text-red-500 mt-1 mr-3"></i>
            <div>
              <p class="text-sm font-medium text-gray-800">Website Display</p>
              <p class="text-xs text-gray-600">
                Testimonial will be removed from your website immediately
              </p>
            </div>
          </div>

          <div class="flex items-start">
            <i class="fas fa-database text-red-500 mt-1 mr-3"></i>
            <div>
              <p class="text-sm font-medium text-gray-800">Data Removal</p>
              <p class="text-xs text-gray-600">
                All testimonial data including text, rating, and image will be
                permanently deleted
              </p>
            </div>
          </div>

          <div class="flex items-start">
            <i class="fas fa-ban text-red-500 mt-1 mr-3"></i>
            <div>
              <p class="text-sm font-medium text-gray-800">
                Irreversible Action
              </p>
              <p class="text-xs text-gray-600">
                This deletion cannot be undone or recovered
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Confirmation Form -->
      <div class="bg-white rounded-lg shadow p-6">
        <h3
          class="text-lg font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2"
        >
          <i class="fas fa-check-circle mr-2 text-green-500"></i>Confirm
          Deletion
        </h3>

        <form method="post" class="space-y-4">
          {% csrf_token %}

          <!-- Confirmation Checkbox -->
          <div class="flex items-center">
            <input
              type="checkbox"
              id="confirm_deletion"
              name="confirm_deletion"
              class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"
              required
            />
            <label
              for="confirm_deletion"
              class="ml-2 block text-sm text-gray-700"
            >
              I understand that this action is permanent and cannot be undone
            </label>
          </div>

          <!-- Reason for Deletion -->
          <div>
            <label
              for="deletion_reason"
              class="block text-sm font-medium text-gray-700 mb-2"
            >
              Reason for Deletion (Optional)
            </label>
            <textarea
              id="deletion_reason"
              name="deletion_reason"
              rows="3"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500"
              placeholder="Enter the reason for deleting this testimonial..."
            ></textarea>
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row justify-between gap-4 pt-4">
            <a
              href="{% url 'dashboard:testimonials_management' %}"
              class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 transition-colors text-center"
            >
              <i class="fas fa-times mr-2"></i>Cancel
            </a>

            <button
              type="submit"
              id="delete_button"
              disabled
              class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
            >
              <i class="fas fa-trash mr-2"></i>Yes, Delete Testimonial
              Permanently
            </button>
          </div>
        </form>

        <div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
          <p class="text-sm text-blue-800">
            <i class="fas fa-info-circle mr-1"></i>
            This will remove the testimonial from your website immediately and
            cannot be recovered.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block dashboard_extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const confirmCheckbox = document.getElementById("confirm_deletion");
    const deleteButton = document.getElementById("delete_button");

    function updateDeleteButton() {
      deleteButton.disabled = !confirmCheckbox.checked;
    }

    confirmCheckbox.addEventListener("change", updateDeleteButton);

    // Additional confirmation for testimonial deletion
    document.querySelector("form").addEventListener("submit", function (e) {
      if (
        !confirm(
          "FINAL WARNING: You are about to permanently delete this testimonial. This action cannot be undone. Continue?"
        )
      ) {
        e.preventDefault();
      }
    });

    // Auto-focus on checkbox
    confirmCheckbox.focus();
  });
</script>
{% endblock %}
